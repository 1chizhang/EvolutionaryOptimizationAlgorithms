# 电影院观影角度模型

## 问题简介

  电影院观影时，人们选择的排数各不相同，除了个人原因之外，前后排的主要差别在于视角和仰角，视角是观众眼睛要屏幕上、下边缘的夹角，视角大画面看起来更加饱满；仰角是观众眼睛到屏幕上边缘视线与水平线的夹角，仰角太大会使人的头部过分上仰，引起不舒适感。从影院设计者的角度出发，应该在总体上使观众的视角尽可能大，仰角应该有一定的限制。

![](C:\Users\22179\Desktop\Eoa\picture\图1.png)

  图1画出了某一排观众的视角$\alpha$和仰角$\beta$，可以看出，影响$\alpha$的因素有屏幕高度$h$，屏幕下边缘距地面高度$b$，第一排座位与屏幕水平距离$d$，座位地板线与地面夹角$\theta$，两排座位间距$q$，观众眼睛到地板的距离$c$等，其中$h,q,c$基本上是固定的，如果总排数一定，$d$的改变空间也不大。

  从设计者角度来看，可以按照以下几个方面来考虑观众的满意程度：

  1.全体观众视角平均值尽量大，而各排座位视角的分散程度尽量小。

  2.各排座位的仰角基本上不要超过30°。

  3.前排观众不应遮挡后排观众视线。

## 问题分析

  记影院各排座位序号为$k=1,2,..,n,$从图1可以看出，随着座位序号$k$的增加，视角$\alpha$和仰角$\beta$均在减小。全体观众视角的平均值为$k=1$到$n$排视角的均值，各排座位视角的分散程度用概率统计中这$n$个视角的均方差来度量，因为均值越大且均方差越小，全体观众满意程度越高，所以观众的满意程度可以定义为各排视角的均值与均方差之比，概率统计中称之为变异系数，这个优化问题的目标函数就取作各排座位视角的变异系数。

  问题的第一个约束条件是仰角$\beta \leq30°$,且允许$1-2$排不满足，由于$\beta$随$k$的增加而减少，所以只需检查前3排仰角的数值即可。

  第二个约束条件是前排观众不遮挡后排的视线，需要在观众眼睛到地板距离$c$之上，直观地看，只要最后一排满足这个条件，所有座位都会满足。

  目标函数的自变量即设计者的控制变量，是屏幕下边缘距地面高度$b$及座位地板线与地面夹角$\theta$。

## 模型假设

  作为固定参数，设屏幕高度$h=2.5m$,第1排座位与屏幕水平距离$d=6m$，两排座位间距$q=0.8m$，观众眼睛到地板的距离$c=1.1m$，观众眼睛到头顶的高度$c_1=0.1m$，座位总排数$n=16$.作为控制变量，设屏幕下边缘距地面高度$b$在$2m$至$3m$变化，座位地板线与地面夹角$\theta$在$10°$至$20°$变化。

## 模型建立

![](C:\Users\22179\Desktop\Eoa\picture\图2.png)

  计算第$k$排作为的下仰角$\gamma_k$、上仰角$\beta_k$和视角$\alpha_k$

$$\tan \gamma_k=\frac{b-c-(k-1)q\tan\theta}{d+(k-1)q}\qquad(1)$$

$$\tan \beta_k=\frac{b-c-(k-1)q\tan\theta+h}{d+(k-1)q}\qquad(2)$$

$$\alpha_k=\beta_k-\gamma_k\qquad(3)$$

   记各排视角的均值为$m(\alpha)$，均方差为$s(\alpha)$，变异系数为$v(\alpha)$，则

$$m(\alpha)=\frac{1}{n}\sum_{k=1}^n\alpha_k,s(\alpha)=\sqrt{\frac{1}{n-1}\sum_{k=1}^n[\alpha_k-m(\alpha)]^2},v(\alpha)=\frac{m(\alpha)}{s(\alpha)}\qquad(4)$$

  $v(\alpha)$是这个优化模型的目标函数，其中$h,d,q,c$和$n$为常数，要确定$b$和$\theta$（在设定区间内）使$v(\alpha)$最大

  模型对于仰角$\beta$的约束条件为:

$$\beta\leq30°,k=3,...,n\qquad(5)$$



![](C:\Users\22179\Desktop\Eoa\picture\图3.png)

  

  图3表示的是最后一排与前一排之间的遮挡关系，$\gamma_n$是从第n排观众眼睛$A$点到屏幕下边缘视线的下仰角，$\delta$是连接A点和第$n-1$排观众头顶$B$点连线与水平线的夹角，当连线在水平线以下时，$\delta$为负，视线不被遮挡的条件是$\gamma_n>\delta$，即

$\tan\gamma_n>\tan\delta\qquad(6)$

  其中

$$\tan\delta=\frac{c_1-q\tan\theta}{q}\qquad(7)$$

  于是$(6)$式等价于

$\frac{b-c-(n-1)q\tan\theta}{d+(n-1)q}>\frac{c_1-q\tan\theta}{q}\qquad(8)$

  不难看出，$\gamma_k$是k的减函数，$\delta$是与$k$无关的常数，所以$(8)$式就是全体观众视线不被遮挡的条件

所以就建立了以$(1)-(4)$式为目标函数，$(5),(6)$式为约束条件，$b,\theta$为自变量的优化模型。

## 模型求解

表一$\qquad$各排座位视角变异系数的计算结果

|       | $\theta$ |        |        |            |        |        |        |        |        |        |        |
| ----- | -------- | ------ | ------ | ---------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| $b/m$ | 10°      | 11°    | 12°    | 13°        | 14°    | 15°    | 16°    | 17°    | 18°    | 19°    | 20°    |
| 2.0   | 3.1452   | 3.1443 | 3.1423 | 3.1392     | 3.1351 | 3.1300 | 3.1237 | 3.1163 | 3.1077 | 3.0981 | 3.0872 |
| 2.1   | 3.1795   | 3.1789 | 3.1772 | 3.1745     | 3.1707 | 3.1658 | 3.1598 | 3.1526 | 3.1443 | 3.1348 | 3.1240 |
| 2.2   | 3.2154   | 3.2152 | 3.2139 | 3.2115     | 3.2081 | 3.2034 | 3.1977 | 3.1907 | 3.1826 | 3.1732 | 3.1626 |
| 2.3   | 3.2530   | 3.2532 | 3.2523 | 3.2503     | 3.2471 | 3.2428 | 3.2373 | 3.2306 | 3.2226 | 3.2134 | 3.2029 |
| 2.4   | 3.2924   | 3.2930 | 3.2925 | 3.2908     | 3.2880 | 3.2840 | 3.2787 | 3.2722 | 3.2645 | 3.2554 | 3.2451 |
| 2.5   | 3.3336   | 3.3347 | 3.3346 | 3.3332     | 3.3307 | 3.3270 | 3.3220 | 3.3158 | 3.3082 | 3.2994 | 3.2891 |
| 2.6   | 3.3767   | 3.3782 | 3.3785 | 3.3775     | 3.3754 | 3.3720 | 3.3673 | 3.3613 | 3.3539 | 3.3452 | 3.3351 |
| 2.7   | 3.4217   | 3.4236 | 3.4243 | 3.4238     | 3.4220 | 3.4189 | 3.4145 | 3.4087 | 3.4016 | 3.3931 | 3.3831 |
| 2.8   | 3.4686   | 3.4710 | 3.4722 | 3.4720     | 3.4706 | 3.4679 | 3.4638 | 3.4583 | 3.4513 | 3.4430 | 3.4331 |
| 2.9   | 3.5176   | 3.5204 | 3.5221 | 3.5224     | 3.5213 | 3.5189 | 3.5151 | 3.5099 | 3.5032 | 3.4950 | 3.4853 |
| 3.0   | 3.5686   | 3.5720 | 3.5741 | **3.5748** | 3.5742 | 3.5721 | 3.5686 | 3.5637 | 3.5572 | 3.5492 | 3.5396 |

  计算结果显示，随着$b$的增加，均值$m(\alpha)$和均方差$s(\alpha)$都在减少，但$m(\alpha)$只减少约$5\%$，而$s(\alpha)$减少约$15\%$，结果就导致了$v(\alpha)$一直再增加，，最大值位于区间端点处，随着$\theta$的增加，$m(\alpha)$和$s(\alpha)$都在增加，导致$v(\alpha)$先增后减，最大值在区间内，当$b=3.0m$时，$v(\alpha)$最大值在$\theta=13°$达到。

表二$\qquad$在$b=3.0m,\theta=13°$处各排座位仰角的计算

|           |         |         |         |         |         |         |         |         |
| --------- | ------- | ------- | ------- | ------- | ------- | ------- | ------- | ------- |
| $k$       | 1       | 2       | 3       | 4       | 5       | 6       | 7       | 8       |
| $\beta_k$ | 36.2538 | 31.7947 | 27.9390 | 24.6005 | 21.7005 | 19.1701 | 16.9512 | 14.9951 |
| $$k$$     | 9       | 10      | 11      | 12      | 13      | 14      | 15      | 16      |
| $\beta_k$ | 13.2615 | 11.7173 | 10.335  | 9.0916  | 7.9684  | 6.9494  | 6.0214  | 5.1730  |

可以看出除一二排外，各排座位满足$(6)$式。

表三$\qquad$在$b=3.0m,\theta=13°$处各排座位视角的计算结果

|            |         |         |         |         |         |         |         |             |             |
| ---------- | ------- | ------- | ------- | ------- | ------- | ------- | ------- | ----------- | ----------- |
| $k$        | 1       | 2       | 3       | 4       | 5       | 6       | 7       | 8           | 9           |
| $\alpha_k$ | 18.6826 | 17.6371 | 16.5521 | 15.4975 | 14.5067 | 13.5927 | 12.7579 | 11.9990     | 11.3103     |
| $k$        | 10      | 11      | 12      | 13      | 14      | 15      | 16      | $m(\alpha)$ | $s(\alpha)$ |
| $\alpha_k$ | 10.6855 | 10.1178 | 9.6012  | 9.1301  | 8.6993  | 8.3044  | 7.9415  | 12.3135     | 3.4445      |

<img src="C:\Users\22179\Desktop\Eoa\picture\图4.png" style="zoom: 80%;" />



表3是最优解$b=3.0m,\theta=13°$处的视角$\alpha_k$及均值$m(\alpha)$、均方差$s(\alpha)$的计算结果

### 结果分析

  对表1作敏感性分析，在最优解$b=3.0m,$当$\Delta b=0.1m$即$\frac{\Delta b}{b}\approx 3.3\%$时，$\frac{\Delta v}{v}\approx 1.5\%$，相当于自变量$b$的$1\%$的改变引起目标函数不到$0.5\%$的变化，在最优值$\theta=13°$，当$\Delta \theta=1°$即$\frac{\Delta \theta}{\theta}\approx8\%$时，$\frac{\Delta v}{v}\approx0.2\%$，相当于自变量$\theta$的$1\%$的改变引起目标函数不到$0.03\%$的变化。

  由图四可以看出，仰角下降的很快，而视角变化并不大，因此可以选择仰角下降变缓的第10排左右。

## 遗传算法

  遗传算法（Genetic Algorithm, GA）是模拟达尔文生物进化论的自然选择和遗传学机理的生物进化过程的计算模型，是一种通过模拟自然进化过程搜索最优解的方法。

  其主要特点是直接对结构对象进行操作，不存在求导和函数连续性的限定；具有内在的隐并行性和更好的全局寻优能力；采用概率化的寻优方法，不需要确定的规则就能自动获取和指导优化的搜索空间，自适应地调整搜索方向。

  遗传算法以一种群体中的所有个体为对象，并利用随机化技术指导对一个被编码的参数空间进行高效搜索。其中，选择、交叉和变异构成了遗传算法的遗传操作；参数编码、初始群体的设定、适应度函数的设计、遗传操作设计、控制参数设定五个要素组成了遗传算法的核心内容。

### （1）编码

  $\theta$的精度只需精确到个位，区间长度为10，所以编码需要二进制串4位，$b$的精度需精确到一位小数，区间长度为1，所以编码也需要二进制串4位。

  二进制串转化为小数的表示方法：

①将二进制串$(b_3b_2b_1b_0)$代表的二进制数转化为十进制数

$(b_3b_2b_1b_0)_2=(\sum_{i=0}^{3}b_i*2^i)_{10}=x^{\\'}$

②$x_{\\'}$对应的区间内的实数